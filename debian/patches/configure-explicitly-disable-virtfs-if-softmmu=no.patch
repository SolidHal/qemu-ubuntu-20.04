From 3091613bb3a31e6d68f108632922678069185bb9 Mon Sep 17 00:00:00 2001
From: Michael Tokarev <mjt@tls.msk.ru>
Date: Tue, 11 Jun 2013 00:43:40 +0400
Subject: [PATCH trivial] configure: explicitly disable virtfs if softmmu=no

Or else

 ./configure --disable-system --enable-virtfs

(which makes no sense by its own but does not error out)
will fail to build, because it will define CONFIG_VIRTFS,
and the makefile will try to build virtfs-proxy-helper
manpage (but not the executable).

Cc: qemu-trivial@nongnu.org
Cc: M. Mohan Kumar <mohan@in.ibm.com>
Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
---
 configure |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/configure b/configure
index a3f0b7a..0ff0380 100755
--- a/configure
+++ b/configure
@@ -3423,6 +3423,8 @@ if test "$softmmu" = yes ; then
       tools="qemu-ga\$(EXESUF) $tools"
     fi
   fi
+else
+  virtfs=no
 fi
 
 # Mac OS X ships with a broken assembler
-- 
1.7.10.4

