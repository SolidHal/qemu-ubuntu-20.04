commit 6b175f492a212a8ffede03b164c2f980384cc59d
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Sun Jan 8 13:38:23 2012 +0100

    configure: fix library linking for smartcard NSS and usbredir
    
    configure script currently add smartcard NSS and usbredir libraries to
    LIBS instead of libs_softmmu. This cause even the qemu-user builds to
    link with them, and causes some problems with --static as NSS libraries
    are usually not available as static.
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/configure b/configure
index 0309dad..ce39534 100755
--- a/configure
+++ b/configure
@@ -2552,7 +2552,7 @@ if test "$smartcard" != "no" ; then
             libcacard_libs=$($pkg_config --libs nss 2>/dev/null)
             libcacard_cflags=$($pkg_config --cflags nss 2>/dev/null)
             QEMU_CFLAGS="$QEMU_CFLAGS $smartcard_cflags $libcacard_cflags"
-            LIBS="$libcacard_libs $LIBS"
+            libs_softmmu="$libs_softmmu $libcacard_libs"
         else
             if test "$smartcard_nss" = "yes"; then
                 feature_not_found "nss"
@@ -2572,7 +2572,7 @@ if test "$usb_redir" != "no" ; then
         usb_redir_cflags=$($pkg_config --cflags libusbredirparser 2>/dev/null)
         usb_redir_libs=$($pkg_config --libs libusbredirparser 2>/dev/null)
         QEMU_CFLAGS="$QEMU_CFLAGS $usb_redir_cflags"
-        LIBS="$LIBS $usb_redir_libs"
+        libs_softmmu="$libs_softmmu $usb_redir_libs"
     else
         if test "$usb_redir" = "yes"; then
             feature_not_found "usb-redir"
